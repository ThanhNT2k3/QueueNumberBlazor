@if (IsVisible)
{
    <div class="base-alert alert-@Variant @(Dismissible ? "alert-dismissible" : "") fade show @ContainerClass" role="alert">
        @if (!string.IsNullOrEmpty(Icon))
        {
            <i class="@Icon me-2"></i>
        }
        @if (!string.IsNullOrEmpty(Title))
        {
            <strong class="alert-title">@Title</strong>
            @if (!string.IsNullOrEmpty(Message) || ChildContent != null)
            {
                <br />
            }
        }
        @if (!string.IsNullOrEmpty(Message))
        {
            @Message
        }
        @ChildContent
        @if (Dismissible)
        {
            <button type="button" class="btn-close" @onclick="Dismiss" aria-label="Close"></button>
        }
    </div>
}

<style>
    .base-alert {
        border-radius: 12px;
        border: none;
        padding: 1rem 1.25rem;
        margin-bottom: 1rem;
        animation: slideInDown 0.3s ease-out;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .alert-title {
        font-weight: 700;
        font-size: 15px;
    }

    .base-alert.alert-primary {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        color: #5a67d8;
        border-left: 4px solid #667eea;
    }

    .base-alert.alert-success {
        background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
        color: #059669;
        border-left: 4px solid #10b981;
    }

    .base-alert.alert-danger {
        background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
        color: #dc2626;
        border-left: 4px solid #ef4444;
    }

    .base-alert.alert-warning {
        background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(217, 119, 6, 0.1) 100%);
        color: #d97706;
        border-left: 4px solid #f59e0b;
    }

    .base-alert.alert-info {
        background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.1) 100%);
        color: #2563eb;
        border-left: 4px solid #3b82f6;
    }

    .base-alert .btn-close {
        opacity: 0.5;
        transition: opacity 0.2s ease;
    }

    .base-alert .btn-close:hover {
        opacity: 1;
    }

    @@keyframes slideInDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

@code {
    [Parameter] public string Variant { get; set; } = "primary"; // primary, success, danger, warning, info
    [Parameter] public string? Title { get; set; }
    [Parameter] public string? Message { get; set; }
    [Parameter] public string? Icon { get; set; }
    [Parameter] public bool Dismissible { get; set; } = true;
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public string ContainerClass { get; set; } = "";
    [Parameter] public EventCallback OnDismiss { get; set; }

    private bool IsVisible = true;

    private async Task Dismiss()
    {
        IsVisible = false;
        await OnDismiss.InvokeAsync();
    }
}
